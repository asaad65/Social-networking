<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="stayle.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&t" />

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>    
</head>
<body>
    <div style="display: flex; justify-content: center; align-items: center; position: fixed; top: 0px; bottom: 0px; left: 0px;right: 0px; margin: auto; background: #858585b6; width: 100px; height: 100px; border-radius: 10px; z-index: 9999;" id="lolo">
    <span class="loader"></span>
    </div>
       <div class="alert">
        <div>
            <img src="imges/true.jpeg" alt="">
            <h2>تم التسجيل الدخول بنجاح</h2>
        </div>
    </div>
    <div id="mod2" style="height: 100vh; width: 100%; display: flex; justify-content: center; position: absolute; display: none; align-items: center;" >
    <div class="model">
        <div>
            <label for="name1">name</label>
            <input type="text" placeholder="name" id="name1">
        </div>
        <div>
            <label for="password">password</label>
            <input type="password" placeholder="password" id="password">
        </div>
       <button id="cancel">cancel</button>
       <button id="login2">login</button>
       <h2 id="error"></h2>
    </div>
    </div>
    <div id="mod3" style="height: 100vh; width: 100%; display: flex; justify-content: center; position: absolute; display: none; align-items: center;" >
    <div class="model">
        <div>
            <label for="name2">name:</label>
            <input type="text" placeholder="name" id="name2">
        </div>
        <div>
            <label for="password2">password:</label>
            <input type="password" placeholder="password" id="password2">
        </div>
                <div>
            <label for="username">username:</label>
            <input type="text" placeholder="username" id="username">
        </div>
                <div>
            <label for="email">email:</label>
            <input type="email" placeholder="email" id="email">
        </div>
                <div>
            <label for="image">image:</label>
            <input type="file" placeholder="image" id="image">
        </div>
       <button id="cancel2">cancel</button>
       <button id="Register2">Register</button>
       <h2 id="error2"></h2>
    </div>
    </div>
    <div class="continr">
       <div class="left">
        <h3 onclick="location = 'index.html'">Tarmeez</h3>
        <h3 onclick="protfileine()">Home</h3>
       <span onclick="protfileine()">Profile</span>
       </div>
       <div>
        <img id="img9"  src="imges/user.png" alt="" style="width: 40px; height: 40px; border: 1px solid #000000; border-radius: 50px;">
        <span id="Profile"></span>
       <button onclick="getLogin()" id="log">Login</button>
       <button id="rej">Register</button>
       <button id="logout">logout</button>
    
       </div>
    </div>
    <div class="content">
        <div class="profile2">
            <!-- <div class="profile_heder" style="background: rgb(255, 255, 255);display: flex; flex-direction: row;gap: 50px; width: 100%; height: 180px; align-items: center; border: 1px solid #8a8a8a; margin-top: 20px; ">
                    <div class="hedars">
                        <img src="imges/1.jpg" alt="" style=" width: 120px; height: 120px; margin-left: 20px; border: 1px solid #000000dd; border-radius: 100px;">
                    </div>
                    <div class="bode">
                        <h3>asaad</h3>
                        <h3>asaad.ap@gamel</h3>
                        <h3>asaad99</h3>
                    </div>
                    <div class="foter">
                        <div style="display: flex; gap: 5px; align-items: center;">
                    <span style="font-size: 40px;">4</span><p style="color: #838383;">comment</p>
                        </div>
                        <div style="display: flex; gap: 5px; align-items: center;">
                    <span style="font-size: 40px;">8</span><p style="color: #838383;">post</p>
                        </div>
                    </div>
            </div> -->
            <h1>posts:</h1>
            <div class="postats3">
                <!-- <div class="post3">
                    <div class="hedars">
                        <img src="imges/1.jpg" alt=""><span>@Yarhmm</span>

                    </div>
                    <div class="bode">
                        <img src="imges/2.jpg" alt="">
                        <p>2 min ago</p>
                        <h2>hello world</h2>
                        <h5>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam architecto expedita repudiandae atque consequatur, nihil corporis doloribus cum sapiente optio non ipsam unde est aliquam eveniet voluptas, hic magnam ad.</h5>
                    </div>
                    <div class="foter">
                    <span class="material-symbols-outlined">edit</span> <h3>(3)comment</h3> 
                    </div>
                </div>
                <div class="post3">
                    <div class="hedars">
                        <img src="imges/1.jpg" alt=""><span>@Yarhmm</span>

                    </div>
                    <div class="bode">
                        <img src="imges/2.jpg" alt="">
                        <p>2 min ago</p>
                        <h2>hello world</h2>
                        <h5>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam architecto expedita repudiandae atque consequatur, nihil corporis doloribus cum sapiente optio non ipsam unde est aliquam eveniet voluptas, hic magnam ad.</h5>
                    </div>
                    <div class="foter">
                    <span class="material-symbols-outlined">edit</span> <h3>(3)comment</h3> 
                    </div>
                </div> -->
            </div>
       </div>
       <div id ="alet7" style="height: 100vh; width: 100%;  justify-content: center; position: fixed; align-items: center; z-index: -1; display: none; " >
       </div>
    </div>
    <div id="mod5" style="height: 100vh; width: 100%; display: none; justify-content: center; position: absolute; align-items: center;top: 0; background: #e8e8e861; "  >
        <div class="model" style ="height: 200px;">
            <div>
                <label for="title">title:</label>
                <input type="text" placeholder="title" id="title9">
            </div>
            <div>
                <label for="body">body:</label>
                 <textarea id="body9"></textarea>
            </div>
            <!-- <div>
                <label for="img">img:</label>
                <input type="file" id="img90">
            </div> -->
            <button id="cancel11">cancel</button>
            <button id="update" onclick="update(true)">update</button>
        </div>
    </div>
    <div id ="alet7" style="height: 100vh; width: 100%;  justify-content: center; position: fixed; align-items: center; z-index: -1; display: none; " >
    </div>
</body>
<script src="main.js"></script>
<script>
let profile_heder = document.querySelector('.profile_heder')
let url = new URLSearchParams(window.location.search)
let id = url.get('userId')
console.log(id)
 axios.get(`https://tarmeezacademy.com/api/v1/users/${id}`)
 .then(response => {
   let user5 = response.data.data
    console.log(user5)

    let cont = `
                        <div class="hedars">

                           ${typeof user5.profile_image == 'object'?`<img src="imges/user.png" alt="" style=" width: 120px; height: 120px; margin-left: 20px; border: 1px solid #000000dd; border-radius: 100px;">`: `<img src="${user5.profile_image}" alt="" style=" width: 120px; height: 120px; margin-left: 20px; border: 1px solid #000000dd; border-radius: 100px;">`}
                    </div>
                    <div class="bode">
                        <h3>${user5.username}</h3>
                        <h3>${user5.email}</h3>
                        <h3>${user5.name}</h3>
                    </div>
                    <div class="foter">
                        <div style="display: flex; gap: 5px; align-items: center;">
                    <span style="font-size: 40px;">${user5.comments_count}</span><p style="color: #838383;">comment</p>
                        </div>
                        <div style="display: flex; gap: 5px; align-items: center;">
                    <span style="font-size: 40px;">${user5.posts_count}</span><p style="color: #838383;">post</p>
                        </div>
                    </div>
    `
    profile_heder.innerHTML = cont
 })
 function bostUseri(){
     getloder(true)
 let postats3 = document.querySelector('.postats3')
postats3.innerHTML =''
axios.get(`https://tarmeezacademy.com/api/v1/users/${id}/posts`)
.then( response =>{
     getloder(false)
let post = response.data.data
post.forEach(element => {
let eltitel =  element.title == null ? '' : element.title
let elbody =  element.body == null ? '' : element.body
let elimg =typeof element.author.profile_image == 'object' ? 'imges/user.png': element.author.profile_image
 let postId = element.id
   let prog = `
       <div class="post3">
                <div class="hedars"">
                    <img src=${elimg} alt=""><span>${element.author.name}</span>
                    ${JSON.parse(localStorage.getItem('user'))?element.author.id == JSON.parse(localStorage.getItem('user')).id?`<button onclick = "btn_edit('${encodeURIComponent(JSON.stringify(element))}')" class="btn_edit" style="margin-left: auto; background:#3e3e3e; border:1px solid #000; padding:5px 10px; border-radius: 10px; cursor: pointer; color:#fff; ">edit</button>`:'':''}
                    ${JSON.parse(localStorage.getItem('user'))?element.author.id == JSON.parse(localStorage.getItem('user')).id?`<button onclick = "delet(${postId},${true})" class="delet" style="margin-left: 10px; background:red; border:1px solid #000; padding:5px 10px; border-radius: 10px; cursor: pointer; color:#fff; ">delet</button>`:'':''}

                </div>
                <div class="bode">
                   ${typeof element.image == 'object' ? '' : `<img src=${element.image} alt="">` }
                    <p>${element.created_at}</p>
                    <h2>${eltitel}</h2>
                    <h5>${elbody}</h5>
                </div>
                <div class="foter" onclick="post_coment(${postId})" style = "cursor: pointer;">
                  <span class="material-symbols-outlined">edit</span> <h3>(${element.comments_count})comment</h3> 
                </div>
            </div>
  
  `
  postats3.innerHTML += prog
});
})

 }
 bostUseri()



</script>
</html>